language: node_js
node_js:
  - "node"
script:
   - 'if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then npm run build && npm run gh-pages -- -p "$TRAVIS_PULL_REQUEST"; fi'
deploy:
  - skip_cleanup: true
    provider: script
    script: npm run build && npm run gh-pages
    on:
      branch: master
  - skip_cleanup: true
    provider: script
    script: npm run build && npm run gh-pages -- -p "$TRAVIS_BRANCH"
    on:
      all_branches: true
      condition: '"$TRAVIS_BRANCH" != "master" && "$TRAVIS_BRANCH" != "gh-pages"'
